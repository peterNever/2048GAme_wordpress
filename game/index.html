<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2048 Game</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #faf8ef;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}
#game-container {
  width: 400px;
  height: 400px;
  background: #bbada0;
  border-radius: 6px;
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-gap: 10px;
}
.tile {
  width: 80px;
  height: 80px;
  background: #cdc1b4;
  border-radius: 3px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  font-weight: bold;
  color: #776e65;
}
.tile-2 { background: #eee4da; }
.tile-4 { background: #ede0c8; }
.tile-8 { background: #f2b179; color: #f9f6f2; }
.tile-16 { background: #f59563; color: #f9f6f2; }
.tile-32 { background: #f67c5f; color: #f9f6f2; }
.tile-64 { background: #f65e3b; color: #f9f6f2; }
.tile-128 { background: #edcf72; color: #f9f6f2; }
.tile-256 { background: #edcc61; color: #f9f6f2; }
.tile-512 { background: #edc850; color: #f9f6f2; }
.tile-1024 { background: #edc53f; color: #f9f6f2; }
.tile-2048 { background: #edc22e; color: #f9f6f2; }
</style>
</head>
<body>
<div id="game-container"></div>

<script>
const size = 4;
let board = [];

function initBoard() {
  board = Array.from({length: size}, () => Array(size).fill(0));
  addTile();
  addTile();
  drawBoard();
}

function addTile() {
  let empty = [];
  for (let i=0;i<size;i++) {
    for (let j=0;j<size;j++) {
      if (board[i][j]===0) empty.push([i,j]);
    }
  }
  if (!empty.length) return;
  let [i,j] = empty[Math.floor(Math.random()*empty.length)];
  board[i][j] = Math.random()<0.9 ? 2 : 4;
}

function drawBoard() {
  const container = document.getElementById('game-container');
  container.innerHTML = '';
  for (let i=0;i<size;i++) {
    for (let j=0;j<size;j++) {
      const tile = document.createElement('div');
      tile.className = 'tile' + (board[i][j] ? ' tile-' + board[i][j] : '');
      tile.textContent = board[i][j] || '';
      container.appendChild(tile);
    }
  }
}

function slide(row) {
  row = row.filter(v=>v);
  for (let i=0;i<row.length-1;i++) {
    if (row[i]===row[i+1]) { row[i]*=2; row[i+1]=0; }
  }
  row = row.filter(v=>v);
  while(row.length<size) row.push(0);
  return row;
}

function rotate(b) { return b[0].map((_,i)=>b.map(r=>r[i]).reverse()); }

function move(dir) {
  let rotated = false;
  if(dir==='up'){ board=rotate(board); rotated=true; }
  if(dir==='down'){ board=rotate(board); board=rotate(board); board=rotate(board); rotated=true; }
  if(dir==='right'){ board=board.map(r=>r.reverse()); }

  board = board.map(r=>slide(r));

  if(dir==='up' && rotated) board=rotate(rotate(rotate(board)));
  if(dir==='down' && rotated) board=rotate(board);
  if(dir==='right') board=board.map(r=>r.reverse());

  addTile();
  drawBoard();
}

document.addEventListener('keydown', e=>{
  if(e.key==='ArrowUp') move('up');
  else if(e.key==='ArrowDown') move('down');
  else if(e.key==='ArrowLeft') move('left');
  else if(e.key==='ArrowRight') move('right');
});

initBoard();
</script>
</body>
</html>
